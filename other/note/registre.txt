ğŸ“˜ Notes sur les registres x86_64

Les registres sont des emplacements mÃ©moire ultra rapides Ã  lâ€™intÃ©rieur du CPU.
Ce sont les "variables" de lâ€™assembleur, mais avec des noms fixes et parfois des rÃ´les imposÃ©s selon les conventions.

ğŸ§© Registres gÃ©nÃ©raux (GPR â€” General Purpose Registers)
ğŸ”¹ RAX

Registre principal pour les rÃ©sultats de fonction

UtilisÃ© pour mettre le numÃ©ro du syscall (ex : 1 pour write)

TrÃ¨s souvent utilisÃ© comme registre temporaire

ğŸ”¹ RBX

Registre gÃ©nÃ©ral mais callee-saved (la fonction doit le restaurer)

Moins utilisÃ© pour les opÃ©rations temporaires

ğŸ”¹ RCX

Sert de compteur dans les instructions comme rep movsb

Peut aussi servir de registre temporaire

ğŸ”¹ RDX

UtilisÃ© pour le 3áµ‰ argument des fonctions C

GÃ©nÃ©ralement utilisÃ© pour stocker des longueurs / tailles

ğŸ”¹ RSI

2áµ‰ argument des fonctions C

TrÃ¨s utilisÃ© comme source dans les instructions movs, stos, etc.

ğŸ”¹ RDI

1áµ‰Ê³ argument des fonctions C

TrÃ¨s utilisÃ© pour pointer vers une zone mÃ©moire, buffer, stringâ€¦

ğŸ”¹ R8 â€“ R11

Registres volatiles (caller-saved)

UtilisÃ©s pour les arguments 5 Ã  6 des fonctions

TrÃ¨s pratiques comme registres temporaires

ğŸ”¹ R12 â€“ R15

Registres callee-saved

Souvent utilisÃ©s pour stocker des variables "persistantes" dans une fonction

ğŸ§± Registres de la pile
ğŸ”¹ RSP â€” Stack Pointer

Pointe sur le haut de la pile

DÃ©crÃ©mente pour empiler (push)

IncrÃ©mente pour dÃ©piler (pop)

ğŸ”¹ RBP â€” Base Pointer

UtilisÃ© comme repÃ¨re fixe pour les variables locales

Optionnel en assembleur pur (souvent omis pour optimiser)

ğŸ§­ Conventions dâ€™appel importantes
ğŸ”¥ Pour les fonctions C (System V AMD64)

Les arguments sont passÃ©s dans cet ordre :

RDI

RSI

RDX

RCX

R8

R9

â†’ Le rÃ©sultat est toujours dans RAX.

ğŸ”¥ Pour les syscalls Linux

Les registres ont un rÃ´le imposÃ© :

RAX = numÃ©ro du syscall

RDI = 1áµ‰Ê³ argument

RSI = 2áµ‰ argument

RDX = 3áµ‰ argument

R10 = 4áµ‰ argument

R8 = 5áµ‰ argument

R9 = 6áµ‰ argument

Exemple pour write(fd, buffer, len) :

RAX = 1

RDI = fd

RSI = buffer

RDX = len

ğŸ¯ RÃ©sumÃ© simple

Oui : tu peux mettre ce que tu veux dans les registres
â†’ mais pas si tu veux appeler une fonction C ou un syscall, car la convention dâ€™appel impose lâ€™ordre.

Pour du code interne (inline asm simple), tu peux utiliser nâ€™importe quel registre comme variable temporaire.
